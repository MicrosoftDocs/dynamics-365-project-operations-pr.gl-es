---
title: Sincronizar contratos de proxecto e proxectos directamente desde Project Service Automation to Finance
description: Este tema describe o modelo e as tarefas subxacentes que se usan para sincronizar os contratos do proxecto e os proxectos directamente desde Microsoft Dynamics 365 Project Service Automation a Dynamics 365 Finance.
author: Yowelle
manager: AnnBe
ms.date: 12/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: andchoi
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 1a470fd86ceccd7b6058da6972399a6d6be2a991
ms.sourcegitcommit: 2b74edd31f38410024a01124c9202a4d94464d04
ms.translationtype: HT
ms.contentlocale: gl-ES
ms.lasthandoff: 12/17/2020
ms.locfileid: "4764817"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance"></a><span data-ttu-id="dbb7e-103">Sincronizar contratos de proxecto e proxectos directamente desde Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-103">Synchronize project contracts and projects directly from Project Service Automation to Finance</span></span> 

[!include[banner](../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]

<span data-ttu-id="dbb7e-104">Este tema describe o modelo e as tarefas subxacentes que se usan para sincronizar os contratos do proxecto e os proxectos directamente desde Dynamics 365 Project Service Automation a Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="dbb7e-105">Se está a usar Enterprise edition 7.3.0, debe instalar KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="dbb7e-106">Fluxo de datos de Project Service Automation a Finanzas</span><span class="sxs-lookup"><span data-stu-id="dbb7e-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="dbb7e-107">Antes de que poida usar a solución de integración de Project Service Automation a Finanzas, debería estar familiarizado coa funcionalidade de integración de datos de Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="dbb7e-108">A solución de integración de Project Service Automation a Finanzas usa a funcionalidade de Integración de datos para sincronizar datos entre instancias de Project Service Automation e Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="dbb7e-109">O modelo de integración dispoñible coa funcionalidade de integración de datos permite o fluxo de datos sobre contratos de proxectos, proxectos, liñas de contratos de proxectos e fitos da liña de contratos de proxectos de Project Service Automation a Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="dbb7e-110">A seguinte ilustración mostra como se sincronizan os datos entre Project Service Automation e Finance.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="dbb7e-111">[![Fluxo de datos para a integración de Project Service Automation con Finanzas](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow_upd.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="dbb7e-112">Modelos e tarefas</span><span class="sxs-lookup"><span data-stu-id="dbb7e-112">Templates and tasks</span></span>

<span data-ttu-id="dbb7e-113">Para acceder aos modelos dispoñibles, no centro de administración de Microsoft Power Apps, seleccione **Proxectos** e, despois, na esquina superior dereita, seleccione **Novo proxecto** para seleccionar modelos públicos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-113">To access the available templates, in the Microsoft Power Apps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="dbb7e-114">Os seguintes modelos e as tarefas subxacentes úsanse para sincronizar os contratos de proxectos e os proxectos de Project Service Automation a Finanzas:</span><span class="sxs-lookup"><span data-stu-id="dbb7e-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="dbb7e-115">Integración con Dynamics 365 Project Service Automation v2.x</span><span class="sxs-lookup"><span data-stu-id="dbb7e-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="dbb7e-116">**Nome do modelo en integración de datos:** Proxectos e contratos (Project Service Automation to Finance)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-116">**Name of the template in Data integration:** Projects and contracts (Project Service Automation to Finance)</span></span>
- <span data-ttu-id="dbb7e-117">**Nome das tarefas do proxecto:**</span><span class="sxs-lookup"><span data-stu-id="dbb7e-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="dbb7e-118">Contratos de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-118">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-119">Proxectos de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-119">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-120">Liñas de contrato de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-120">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-121">Fitos e liña de contrato de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-121">Project contract line milestones Project Service Automation to Finance</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="dbb7e-122">Integración con Dynamics 365 Project Service Automation v3.x</span><span class="sxs-lookup"><span data-stu-id="dbb7e-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="dbb7e-123">Hai un cambio de esquema en Project Service Automation que afecta ao modelo de fito da liña de contrato do proxecto e é necesario o uso da versión v2 do modelo para integrar Project Service Automation v3.x con Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="dbb7e-124">**Nome do modelo en integración de datos:** Proxectos e contratos (Project Service Automation 3.x to Finance) - v2</span><span class="sxs-lookup"><span data-stu-id="dbb7e-124">**Name of the template in Data integration:** Projects and Contracts (Project Service Automation 3.x to Finance) - v2</span></span>
- <span data-ttu-id="dbb7e-125">**Nome das tarefas do proxecto:**</span><span class="sxs-lookup"><span data-stu-id="dbb7e-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="dbb7e-126">Contratos de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-126">Project contracts Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-127">Proxectos de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-127">Projects Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-128">Liñas de contrato de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-128">Project contract lines Project Service Automation to Finance</span></span>
    - <span data-ttu-id="dbb7e-129">Fitos e liña de contrato de proxecto de Project Service Automation to Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-129">Project contract line milestones Project Service Automation to Finance</span></span>

<span data-ttu-id="dbb7e-130">Antes de que poida producirse a sincronización de contratos de proxectos e proxectos, debe sincronizar as contas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="dbb7e-131">Conxunto de entidades</span><span class="sxs-lookup"><span data-stu-id="dbb7e-131">Entity set</span></span>

| <span data-ttu-id="dbb7e-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="dbb7e-132">Project Service Automation</span></span>       | <span data-ttu-id="dbb7e-133">Finanzas</span><span class="sxs-lookup"><span data-stu-id="dbb7e-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="dbb7e-134">Pedidos</span><span class="sxs-lookup"><span data-stu-id="dbb7e-134">Orders</span></span>                           | <span data-ttu-id="dbb7e-135">Entidade de integración para contrato do proxecto</span><span class="sxs-lookup"><span data-stu-id="dbb7e-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="dbb7e-136">Proxectos</span><span class="sxs-lookup"><span data-stu-id="dbb7e-136">Projects</span></span>                         | <span data-ttu-id="dbb7e-137">Entidade de integración para proxecto</span><span class="sxs-lookup"><span data-stu-id="dbb7e-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="dbb7e-138">Liñas de pedido</span><span class="sxs-lookup"><span data-stu-id="dbb7e-138">Order lines</span></span>                      | <span data-ttu-id="dbb7e-139">Entidade de integración para liña de contrato do proxecto</span><span class="sxs-lookup"><span data-stu-id="dbb7e-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="dbb7e-140">Fitos da liña de contrato do proxecto</span><span class="sxs-lookup"><span data-stu-id="dbb7e-140">Project contract line milestones</span></span> | <span data-ttu-id="dbb7e-141">Entidade de integración para fito de liña de contrato do proxecto</span><span class="sxs-lookup"><span data-stu-id="dbb7e-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="dbb7e-142">Fluxo de entidades</span><span class="sxs-lookup"><span data-stu-id="dbb7e-142">Entity flow</span></span>

<span data-ttu-id="dbb7e-143">Os contratos do proxecto xestiónanse en Project Service Automation e sincronízanse con Finanzas como contratos de proxecto.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="dbb7e-144">Como parte do modelo de integración, pode configurar a fonte de integración en Finanzas para o contrato do proxecto.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="dbb7e-145">O tempo, o material e os proxectos a prezo fixo son xestionados en Project Service Automation e sincronizados con Finance como proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-145">Time and material and fixed-price projects are managed in Project Service Automation and synchronized to Finance as projects.</span></span> <span data-ttu-id="dbb7e-146">Como parte da integración de modelos, pode configurar a orixe de integración do proxecto en Finance.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-146">As part of the template integration, you can set the integration source for the project in Finance.</span></span> <span data-ttu-id="dbb7e-147">Actualmente, só se admiten proxectos de tempo e material e prezo fixo.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-147">Currently, only time and material and fixed-price projects are supported.</span></span>


<span data-ttu-id="dbb7e-148">As liñas do contrato do proxecto xestiónanse en Project Service Automation e sincronízanse con Finanzas como regras de facturación dos contratos de proxecto.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-148">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="dbb7e-149">Se o método de facturación é diferente do tipo de proxecto predefinido, a sincronización actualiza o tipo de proxecto para o proxecto da liña de contrato e o grupo de proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-149">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="dbb7e-150">Os fitos das liñas do contrato do proxecto xestiónanse en Project Service Automation e sincronízanse con Finanzas como fitos das regras de facturación dos contratos de proxecto.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-150">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="dbb7e-151">Solución de integración de Project Service Automation con Finance</span><span class="sxs-lookup"><span data-stu-id="dbb7e-151">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="dbb7e-152">O campo **ID do contrato do proxecto** está dispoñible na páxina **Contratos de proxecto**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-152">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="dbb7e-153">Este campo converteuse nunha clave natural e única para apoiar a integración.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-153">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="dbb7e-154">Cando se crea un novo contrato de proxecto, se o valor de **ID do contrato do proxecto** aínda non existe, xérase automaticamente usando unha secuencia de números.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-154">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="dbb7e-155">O valor consiste en **ORD** seguido dunha secuencia numérica crecente e despois dun sufixo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-155">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="dbb7e-156">Este é un exemplo: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-156">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="dbb7e-157">O campo **Número do proxecto** está dispoñible na páxina **Proxectos**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-157">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="dbb7e-158">Este campo converteuse nunha clave natural e única para apoiar a integración.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-158">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="dbb7e-159">Cando se crea un novo proxecto, se o valor de **Número do proxecto** aínda non existe, xérase automaticamente usando unha secuencia de números.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-159">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="dbb7e-160">O valor consiste en **PRJ** seguido dunha secuencia numérica crecente e despois dun sufixo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-160">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="dbb7e-161">Este é un exemplo: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-161">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="dbb7e-162">Cando se aplica a solución de integración de Project Service Automation con Finanzas, unha cadea de actualización establece o campo **ID do contrato do proxecto** para contratos de proxecto existentes e o campo **Número do proxecto** para proxectos existentes en Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-162">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="dbb7e-163">Requisitos previos e configuración de asignación</span><span class="sxs-lookup"><span data-stu-id="dbb7e-163">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="dbb7e-164">Antes de que poida producirse a sincronización de contratos de proxectos e proxectos, debe sincronizar as contas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-164">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="dbb7e-165">No seu conxunto de conexións, engada unha asignación de campos clave de integración para **msdyn\_organizationalunits** a **msdyn\_name \[Nome\]**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-165">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="dbb7e-166">Primeiro pode que teña que engadir un proxecto ao conxunto de conexións.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-166">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="dbb7e-167">Para obter máis información, consulte [Integrar datos en Common Data Service para aplicacións](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="dbb7e-167">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="dbb7e-168">No seu conxunto de conexións, engada unha asignación de campos clave de integración para **msdyn\_projects** a **msdynce\_projectnumber \[Número de proxecto\]**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-168">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="dbb7e-169">Primeiro pode que teña que engadir un proxecto ao conxunto de conexións.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-169">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="dbb7e-170">Para obter máis información, consulte [Integrar datos en Common Data Service para aplicacións](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="dbb7e-170">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="dbb7e-171">**SourceDataID** para contratos de proxectos e proxectos pódese actualizar a un valor diferente ou eliminar da asignación.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-171">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="dbb7e-172">O valor predefinido do modelo é **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-172">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="dbb7e-173">A asignación **PaymentTerms** debe actualizarse para que reflicta termos de pagamento válidas en Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-173">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="dbb7e-174">Tamén pode eliminar a asignación da tarefa do proxecto.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-174">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="dbb7e-175">A asignación de valores predefinidos ten valores predefinidos para os datos de demostración.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-175">The default value map has default values for demo data.</span></span> <span data-ttu-id="dbb7e-176">A seguinte táboa mostra os valores en Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-176">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="dbb7e-177">Valor</span><span class="sxs-lookup"><span data-stu-id="dbb7e-177">Value</span></span> | <span data-ttu-id="dbb7e-178">Descripción</span><span class="sxs-lookup"><span data-stu-id="dbb7e-178">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="dbb7e-179">1</span><span class="sxs-lookup"><span data-stu-id="dbb7e-179">1</span></span>     | <span data-ttu-id="dbb7e-180">Pagamento a 30 días</span><span class="sxs-lookup"><span data-stu-id="dbb7e-180">Net 30</span></span>        |
    | <span data-ttu-id="dbb7e-181">2</span><span class="sxs-lookup"><span data-stu-id="dbb7e-181">2</span></span>     | <span data-ttu-id="dbb7e-182">2 % 10, pagamento a 30 días</span><span class="sxs-lookup"><span data-stu-id="dbb7e-182">2% 10, Net 30</span></span> |
    | <span data-ttu-id="dbb7e-183">3</span><span class="sxs-lookup"><span data-stu-id="dbb7e-183">3</span></span>     | <span data-ttu-id="dbb7e-184">Pagamento a 45 días</span><span class="sxs-lookup"><span data-stu-id="dbb7e-184">Net 45</span></span>        |
    | <span data-ttu-id="dbb7e-185">4</span><span class="sxs-lookup"><span data-stu-id="dbb7e-185">4</span></span>     | <span data-ttu-id="dbb7e-186">Pagamento a 60 días</span><span class="sxs-lookup"><span data-stu-id="dbb7e-186">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="dbb7e-187">Power Query</span><span class="sxs-lookup"><span data-stu-id="dbb7e-187">Power Query</span></span>

<span data-ttu-id="dbb7e-188">Use Microsoft Power Query para Excel para filtrar datos se se cumpren as seguintes condicións:</span><span class="sxs-lookup"><span data-stu-id="dbb7e-188">Use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="dbb7e-189">Vostede ten pedidos de vendas en Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-189">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="dbb7e-190">Ten varias unidades organizativas en Project Service Automation e estas unidades organizativas asignaranse a varias persoas xurídicas en Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-190">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="dbb7e-191">Se debe usar Power Query, siga estas pautas:</span><span class="sxs-lookup"><span data-stu-id="dbb7e-191">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="dbb7e-192">O modelo Proxectos e contratos (PSA a Fin e Ops) ten un filtro predefinido que só inclúe pedidos de venda do tipo **Artigo de traballo (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-192">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="dbb7e-193">Este filtro axuda a garantir que non se crean contratos de proxectos para pedidos de vendas en Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-193">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="dbb7e-194">Se crea o seu propio modelo, debe engadir este filtro.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-194">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="dbb7e-195">Cree un filtro Power Query que inclúa só as organizacións contractuais que deben sincronizarse coa entidade legal do conxunto de conexións de integración.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-195">Create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="dbb7e-196">Por exemplo, os contratos de proxectos que vostede ten coa unidade organizativa do contrato de Contoso US deben sincronizarse coa persoa xurídica USSI, pero os contratos de proxectos que teña coa unidade organizativa do contrato de Contoso Global deben sincronizarse coa persoa xurídica USMF.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-196">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="dbb7e-197">Se non engade este filtro á súa asignación de tarefas, todos os contratos do proxecto sincronizaranse coa persoa xurídica que se define para o conxunto de conexións, independentemente da unidade organizativa do contrato.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-197">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="dbb7e-198">Asignación de modelos na integración de datos</span><span class="sxs-lookup"><span data-stu-id="dbb7e-198">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="dbb7e-199">Os campos **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** e **AddressZipCode** non están incluídos na asignación predefinida para contratos de proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-199">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="dbb7e-200">Pode engadir as asignacións se precisa que estes datos se sincronicen para contratos de proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-200">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="dbb7e-201">Os campos **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** e **ProjectType** non están incluídos na asignación predefinida para proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-201">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="dbb7e-202">Pode engadir as asignacións se precisa que estes datos se sincronicen para proxectos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-202">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="dbb7e-203">As seguintes ilustracións mostran exemplos das asignacións de tarefas do modelo en integración de datos.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-203">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="dbb7e-204">A asignación mostra a información de campo que se sincronizará de Project Service Automation a Finanzas.</span><span class="sxs-lookup"><span data-stu-id="dbb7e-204">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="dbb7e-205">[![Asignación de modelos de contrato de proxecto](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-205">[![Project contract template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="dbb7e-206">[![Asignación de modelos de proxecto](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-206">[![Project template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="dbb7e-207">[![Asignación de modelos de liñas de contrato de proxecto](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-207">[![Project contract lines template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="dbb7e-208">[![Asignación de modelos de fitos de liñas de contrato de proxecto](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-208">[![Project contract line milestone template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="dbb7e-209">Asignación de fitos da liña de contrato de proxecto nos proxectos e contratos (PSA 3.x a Dynamics) - modelo v2:</span><span class="sxs-lookup"><span data-stu-id="dbb7e-209">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="dbb7e-210">[![Asignación de fitos de liñas de contrato de proxecto coa versión dúas do modelo](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="dbb7e-210">[![Project contract line milestone mapping with version two template](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
